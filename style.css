:root {
  --gold: #C59D5F;
  --plum: #7A4EAB;
  --bg1: #fffaf3;
  --bg2: #f7ebf7;
  --bg3: #f3f0fa;
  --text: #2f2a36;
  --muted: #7b7b7b;
  --radius: 18px;
  --shadow: 0 6px 18px rgba(0, 0, 0, 0.05);
}

@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* Base */
body {
  margin: 0;
  font-family: 'Inter', sans-serif;
  background: linear-gradient(120deg, var(--bg1), var(--bg2), var(--bg3));
  background-size: 200% 200%;
  animation: gradientShift 12s ease infinite;
  color: var(--text);
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  overflow-x: hidden;
}
h1, h2 { font-family: 'Nunito', sans-serif; color: var(--plum); }
.section { padding: 40px 20px; text-align: left; }
.center { max-width: 820px; margin: 0 auto; }

/* Topbar + circular logo (kept from current site) */
.topbar {
  position: sticky; top: 0;
  background: rgba(255,255,255,0.85);
  backdrop-filter: blur(8px);
  display: flex; justify-content: space-between; align-items: center;
  padding: 12px 20px; border-bottom: 1px solid rgba(0,0,0,0.05); z-index: 100;
}
.logo { display:flex; align-items:center; text-decoration:none; }
.logo .logo-badge { width:56px; height:56px; border-radius:50%; overflow:hidden; display:inline-flex; align-items:center; justify-content:center; box-shadow:0 0 0 1px rgba(0,0,0,0.06); background:transparent; }
.logo .logo-badge > img { width:100% !important; height:100% !important; object-fit:cover; object-position:center; display:block; background:transparent; border-radius:50%; }
.hamburger { font-size:24px; background:none; border:none; cursor:pointer; color:var(--plum); }
.menu { position:absolute; top:56px; right:16px; background:white; border-radius:var(--radius); box-shadow:var(--shadow); display:flex; flex-direction:column; padding:10px; }
.menu a { color:var(--plum); text-decoration:none; padding:8px 16px; border-radius:8px; }
.menu a:hover { background:#f8f5ff; }
.hidden { display:none; }

/* Stepper */
.stepper {
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 14px;
  margin-bottom: 24px;
}
.step-card {
  background: #fff;
  border-radius: 16px;
  box-shadow: var(--shadow);
  padding: 14px;
  display:flex; gap:12px; align-items:flex-start;
  transform: scale(0.98);
  transition: transform .2s ease, box-shadow .2s ease, border .2s ease;
  border: 2px solid transparent;
  text-align: left;
}
.step-card[disabled] { opacity: 0.7; cursor: not-allowed; }
.step-card .step-number {
  width: 36px; height: 36px; flex: 0 0 36px;
  border-radius: 10px;
  background: #f3e9ff;
  color: var(--plum);
  display:flex; align-items:center; justify-content:center;
  font-weight: 800;
}
.step-card .step-title { font-weight: 800; color: var(--plum); line-height: 1.2; }
.step-card .step-desc { color: #6e6790; font-size: 14px; margin-top: 4px; }
.step-card.current {
  transform: scale(1.03);
  border-color: var(--plum);
  box-shadow: 0 10px 28px rgba(122,78,171,0.12);
}

/* Accordion */
.accordion { background:#fff; border-radius:16px; box-shadow:var(--shadow); margin-bottom:16px; overflow:hidden; }
.acc-title { margin:0; padding:16px 18px; font-size:20px; }
.acc-sub { margin: 8px 18px 0; color: var(--muted); }
.acc-body { padding: 18px; border-top: 1px solid #eee7ff; display:grid; gap:16px; }
.accordion[hidden] { display:none; }
.accordion:not(.open) .acc-body, .accordion:not(.open) .acc-sub { display:none; }

/* Form rows */
.form-row { display:grid; gap:8px; }
label, .label { font-weight:600; color:#4d3d70; }
input[type="text"] {
  width:100%; border-radius:12px; border:1px solid #e0dcec; padding:12px 14px; font-size:16px;
}

/* Chips (toggles) */
.chip-group { display:flex; flex-wrap:wrap; gap:10px; }
.chip {
  border:1px solid #e0dcec; background:#fff; padding:10px 16px; border-radius:999px; cursor:pointer; font-weight:600;
  transition: background .2s ease, color .2s ease, border .2s ease, transform .1s ease;
}
.chip:hover { transform: translateY(-1px); }
.chip.selected { background: #efe6ff; color: #4b2c86; border-color:#cfb7ff; }

/* Theme cards */
.theme-grid { display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:12px; }
.theme-card {
  padding:18px; border-radius:14px; border:2px dashed #e0dcec; background:#fff; font-weight:800; color:#4b2c86; cursor:pointer;
  transition: border .2s ease, transform .1s ease, box-shadow .2s ease;
  text-align:center;
}
.theme-card:hover { transform: translateY(-1px); }
.theme-card.selected { border-style: solid; border-color: var(--plum); box-shadow: 0 8px 20px rgba(122,78,171,0.12); }

/* Supporting characters */
#characters { display:grid; gap:10px; }
.char-row { display:flex; gap:10px; align-items:center; }
.char-row input { flex:1; border-radius:12px; border:1px solid #e0dcec; padding:12px 14px; }
.char-remove {
  border:none; background:#ffe9ec; color:#a33; border-radius:10px; width:38px; height:38px; cursor:pointer; font-size:18px;
}
.char-remove:hover { background:#ffd9de; }

/* Buttons */
.btn {
  background: var(--plum);
  color: white;
  border: none;
  padding: 12px 20px;
  border-radius: 12px;
  cursor: pointer;
  font-weight: 700;
  box-shadow: var(--shadow);
  transition: transform .15s ease, background .2s ease, opacity .2s ease;
}
.btn:hover { transform: translateY(-1px); }
.btn:disabled { opacity: .45; cursor: not-allowed; }
.btn-outline {
  background: #fff;
  color: var(--plum);
  border: 2px solid #e0dcec;
}
.btn-primary { background: var(--plum); }
.actions { display:flex; gap:10px; }
.actions.right { justify-content: flex-end; }
.actions.between { justify-content: space-between; }

/* Placeholder section (Step 2) */
.placeholder { background:#fff; border-radius:16px; box-shadow:var(--shadow); padding:18px; }

/* Utilities */
.fade-in { animation: fadeIn .8s ease both; }
.fade-up { opacity: 0; transform: translateY(20px); animation: fadeUp .9s ease forwards; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
footer { margin-top:auto; text-align:center; padding:20px; color:var(--muted); font-size:14px; }

/* Responsive */
@media (max-width: 800px) {
  .stepper { grid-template-columns: 1fr; }
  .step-card.current { transform: scale(1.01); }
}
@media (max-width: 560px) {
  .theme-grid { grid-template-columns: 1fr; }
  .stack-mobile { flex-direction: column; }
}

.stepper.lock-step1 .step-card {
  /* ignore any .current that might be toggled by old JS */
  pointer-events: none;
  transform: scale(0.98) !important;
  border-color: transparent !important;
  box-shadow: var(--shadow) !important;
}
.stepper.lock-step1 .step-card[data-step="1"] {
  transform: scale(1.03) !important;
  border-color: var(--plum) !important;
  box-shadow: 0 10px 28px rgba(122,78,171,0.12) !important;
}
